"use strict";
var WebpackUtility_1 = require("../util/WebpackUtility");
var FileChanger = (function () {
    function FileChanger(options) {
        if (!options) {
            options = {};
        }
        if (!options.move) {
            options.move = [];
        }
        if (!options.change) {
            options.change = [];
        }
        this.options = options;
        this.apply = this.apply.bind(this);
        this.done = this.done.bind(this);
    }
    FileChanger.prototype.apply = function (compiler) {
        compiler.plugin('done', this.done);
    };
    FileChanger.prototype.done = function (stats, options) {
        for (var i = 0; i < this.options.move.length; i++) {
            var move = this.options.move[i];
            WebpackUtility_1.default.moveFile(stats, move);
        }
        if (this.options.change) {
            for (var i = 0; i < this.options.change.length; i++) {
                var change = this.options.change[i];
                if (change.before) {
                    change.before(stats, change);
                }
                change.file = WebpackUtility_1.default.normalizePath(stats, change.file);
                WebpackUtility_1.default.replaceInFile(stats, change.file, change.parameters);
                if (change.after) {
                    change.after(stats, change);
                }
            }
        }
        if (this.options.complete) {
            this.options.complete(stats);
        }
    };
    return FileChanger;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = FileChanger;
//# sourceMappingURL=FileChanger.js.map